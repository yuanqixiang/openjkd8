<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (1.8.0-internal-debug) on Mon Apr 06 20:30:22 CST 2020 -->
<title>ThreadLocal (Java Platform SE 8 b00)</title>
<meta name="date" content="2020-04-06">
<meta name="keywords" content="java.lang.ThreadLocal class">
<meta name="keywords" content="initialValue()">
<meta name="keywords" content="withInitial()">
<meta name="keywords" content="get()">
<meta name="keywords" content="set()">
<meta name="keywords" content="remove()">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ThreadLocal (Java Platform SE 8 b00)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>???????? JavaScript?</div>
</noscript>
<div style="background-color: #EEEEEE"> <div style="padding: 6px; margin-top: 2px; margin-bottom: 6px; margin-left: 6px; margin-right: 6px; text-align: justify; font-size: 80%; font-family: Helvetica, Arial, sans-serif; font-weight: normal;"> Please note that the specifications and other information contained herein are not final and are subject to change. The information is being made available to you solely for purpose of evaluation. </div> </div>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="??????">??????</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="??">
<li><a href="../../overview-summary.html">??</a></li>
<li><a href="package-summary.html">???</a></li>
<li class="navBarCell1Rev">?</li>
<li><a href="class-use/ThreadLocal.html">??</a></li>
<li><a href="package-tree.html">?</a></li>
<li><a href="../../deprecated-list.html">???</a></li>
<li><a href="../../index-files/index-1.html">??</a></li>
<li><a href="../../help-doc.html">??</a></li>
</ul>
<div class="aboutLanguage"><strong>Java&trade;&nbsp;Platform<br>Standard&nbsp;Ed.&nbsp;8</strong><br><strong>DRAFT&nbsp;internal-b00</strong></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../java/lang/ThreadGroup.html" title="java.lang???"><span class="typeNameLink">????</span></a></li>
<li><a href="../../java/lang/Throwable.html" title="java.lang???"><span class="typeNameLink">????</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?java/lang/ThreadLocal.html" target="_top">??</a></li>
<li><a href="ThreadLocal.html" target="_top">???</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">???</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>??:&nbsp;</li>
<li>??&nbsp;|&nbsp;</li>
<li>??&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">???</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">??</a></li>
</ul>
<ul class="subNavList">
<li>????:&nbsp;</li>
<li>??&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">???</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">??</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">compact1, compact2, compact3</div>
<div class="subTitle">java.lang</div>
<h2 title="? ThreadLocal" class="title">? ThreadLocal&lt;T&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="../../java/lang/Object.html" title="java.lang???">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>java.lang.ThreadLocal&lt;T&gt;</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>??????:</dt>
<dd><a href="../../java/lang/InheritableThreadLocal.html" title="java.lang???">InheritableThreadLocal</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">ThreadLocal&lt;T&gt;</span>
extends <a href="../../java/lang/Object.html" title="java.lang???">Object</a></pre>
<div class="block">This class provides thread-local variables.  These variables differ from
 their normal counterparts in that each thread that accesses one (via its
 <code>get</code> or <code>set</code> method) has its own, independently initialized
 copy of the variable.  <code>ThreadLocal</code> instances are typically private
 static fields in classes that wish to associate state with a thread (e.g.,
 a user ID or Transaction ID).

 <p>For example, the class below generates unique identifiers local to each
 thread.
 A thread's id is assigned the first time it invokes <code>ThreadId.get()</code>
 and remains unchanged on subsequent calls.
 <pre>
 import java.util.concurrent.atomic.AtomicInteger;

 public class ThreadId {
     // Atomic integer containing the next thread ID to be assigned
     private static final AtomicInteger nextId = new AtomicInteger(0);

     // Thread local variable containing each thread's ID
     private static final ThreadLocal&lt;Integer&gt; threadId =
         new ThreadLocal&lt;Integer&gt;() {
             &#64;Override protected Integer initialValue() {
                 return nextId.getAndIncrement();
         }
     };

     // Returns the current thread's unique ID, assigning it if necessary
     public static int get() {
         return threadId.get();
     }
 }
 </pre>
 <p>Each thread holds an implicit reference to its copy of a thread-local
 variable as long as the thread is alive and the <code>ThreadLocal</code>
 instance is accessible; after a thread goes away, all of its copies of
 thread-local instances are subject to garbage collection (unless other
 references to these copies exist).</div>
<dl>
<dt><span class="simpleTagLabel">???????:</span></dt>
<dd>1.2</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>?????</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="??????, ????????">
<caption><span>???</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">??????</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../java/lang/ThreadLocal.html#ThreadLocal--">ThreadLocal</a></span>()</code>
<div class="block">Creates a thread local variable.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>????</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="?????, ???????">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">??????</th>
<th class="colLast" scope="col">?????</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../java/lang/ThreadLocal.html" title="ThreadLocal??????">T</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../java/lang/ThreadLocal.html#get--">get</a></span>()</code>
<div class="block">Returns the value in the current thread's copy of this
 thread-local variable.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected <a href="../../java/lang/ThreadLocal.html" title="ThreadLocal??????">T</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../java/lang/ThreadLocal.html#initialValue--">initialValue</a></span>()</code>
<div class="block">Returns the current thread's "initial value" for this
 thread-local variable.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../java/lang/ThreadLocal.html#remove--">remove</a></span>()</code>
<div class="block">Removes the current thread's value for this thread-local
 variable.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../java/lang/ThreadLocal.html#set-T-">set</a></span>(<a href="../../java/lang/ThreadLocal.html" title="ThreadLocal??????">T</a>&nbsp;value)</code>
<div class="block">Sets the current thread's copy of this thread-local variable
 to the specified value.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static &lt;S&gt;&nbsp;<a href="../../java/lang/ThreadLocal.html" title="java.lang???">ThreadLocal</a>&lt;S&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../java/lang/ThreadLocal.html#withInitial-java.util.function.Supplier-">withInitial</a></span>(<a href="../../java/util/function/Supplier.html" title="java.util.function????">Supplier</a>&lt;? extends S&gt;&nbsp;supplier)</code>
<div class="block">Creates a thread local variable.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>???????&nbsp;java.lang.<a href="../../java/lang/Object.html" title="java.lang???">Object</a></h3>
<code><a href="../../java/lang/Object.html#clone--">clone</a>, <a href="../../java/lang/Object.html#equals-java.lang.Object-">equals</a>, <a href="../../java/lang/Object.html#finalize--">finalize</a>, <a href="../../java/lang/Object.html#getClass--">getClass</a>, <a href="../../java/lang/Object.html#hashCode--">hashCode</a>, <a href="../../java/lang/Object.html#notify--">notify</a>, <a href="../../java/lang/Object.html#notifyAll--">notifyAll</a>, <a href="../../java/lang/Object.html#toString--">toString</a>, <a href="../../java/lang/Object.html#wait--">wait</a>, <a href="../../java/lang/Object.html#wait-long-">wait</a>, <a href="../../java/lang/Object.html#wait-long-int-">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>???????</h3>
<a name="ThreadLocal--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ThreadLocal</h4>
<pre>public&nbsp;ThreadLocal()</pre>
<div class="block">Creates a thread local variable.</div>
<dl>
<dt><span class="seeLabel">????:</span></dt>
<dd><a href="../../java/lang/ThreadLocal.html#withInitial-java.util.function.Supplier-"><code>withInitial(java.util.function.Supplier)</code></a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>??????</h3>
<a name="initialValue--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialValue</h4>
<pre>protected&nbsp;<a href="../../java/lang/ThreadLocal.html" title="ThreadLocal??????">T</a>&nbsp;initialValue()</pre>
<div class="block">Returns the current thread's "initial value" for this
 thread-local variable.  This method will be invoked the first
 time a thread accesses the variable with the <a href="../../java/lang/ThreadLocal.html#get--"><code>get()</code></a>
 method, unless the thread previously invoked the <a href="../../java/lang/ThreadLocal.html#set-T-"><code>set(T)</code></a>
 method, in which case the <code>initialValue</code> method will not
 be invoked for the thread.  Normally, this method is invoked at
 most once per thread, but it may be invoked again in case of
 subsequent invocations of <a href="../../java/lang/ThreadLocal.html#remove--"><code>remove()</code></a> followed by <a href="../../java/lang/ThreadLocal.html#get--"><code>get()</code></a>.

 <p>This implementation simply returns <code>null</code>; if the
 programmer desires thread-local variables to have an initial
 value other than <code>null</code>, <code>ThreadLocal</code> must be
 subclassed, and this method overridden.  Typically, an
 anonymous inner class will be used.</div>
<dl>
<dt><span class="returnLabel">??:</span></dt>
<dd>the initial value for this thread-local</dd>
</dl>
</li>
</ul>
<a name="withInitial-java.util.function.Supplier-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>withInitial</h4>
<pre>public static&nbsp;&lt;S&gt;&nbsp;<a href="../../java/lang/ThreadLocal.html" title="java.lang???">ThreadLocal</a>&lt;S&gt;&nbsp;withInitial(<a href="../../java/util/function/Supplier.html" title="java.util.function????">Supplier</a>&lt;? extends S&gt;&nbsp;supplier)</pre>
<div class="block">Creates a thread local variable. The initial value of the variable is
 determined by invoking the <code>get</code> method on the <code>Supplier</code>.</div>
<dl>
<dt><span class="paramLabel">????:</span></dt>
<dd><code>S</code> - the type of the thread local's value</dd>
<dt><span class="paramLabel">??:</span></dt>
<dd><code>supplier</code> - the supplier to be used to determine the initial value</dd>
<dt><span class="returnLabel">??:</span></dt>
<dd>a new thread local variable</dd>
<dt><span class="throwsLabel">??:</span></dt>
<dd><code><a href="../../java/lang/NullPointerException.html" title="java.lang???">NullPointerException</a></code> - if the specified supplier is null</dd>
<dt><span class="simpleTagLabel">???????:</span></dt>
<dd>1.8</dd>
</dl>
</li>
</ul>
<a name="get--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get</h4>
<pre>public&nbsp;<a href="../../java/lang/ThreadLocal.html" title="ThreadLocal??????">T</a>&nbsp;get()</pre>
<div class="block">Returns the value in the current thread's copy of this
 thread-local variable.  If the variable has no value for the
 current thread, it is first initialized to the value returned
 by an invocation of the <a href="../../java/lang/ThreadLocal.html#initialValue--"><code>initialValue()</code></a> method.</div>
<dl>
<dt><span class="returnLabel">??:</span></dt>
<dd>the current thread's value of this thread-local</dd>
</dl>
</li>
</ul>
<a name="set-java.lang.Object-">
<!--   -->
</a><a name="set-T-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>set</h4>
<pre>public&nbsp;void&nbsp;set(<a href="../../java/lang/ThreadLocal.html" title="ThreadLocal??????">T</a>&nbsp;value)</pre>
<div class="block">Sets the current thread's copy of this thread-local variable
 to the specified value.  Most subclasses will have no need to
 override this method, relying solely on the <a href="../../java/lang/ThreadLocal.html#initialValue--"><code>initialValue()</code></a>
 method to set the values of thread-locals.</div>
<dl>
<dt><span class="paramLabel">??:</span></dt>
<dd><code>value</code> - the value to be stored in the current thread's copy of
        this thread-local.</dd>
</dl>
</li>
</ul>
<a name="remove--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>remove</h4>
<pre>public&nbsp;void&nbsp;remove()</pre>
<div class="block">Removes the current thread's value for this thread-local
 variable.  If this thread-local variable is subsequently
 <a href="../../java/lang/ThreadLocal.html#get--">read</a> by the current thread, its value will be
 reinitialized by invoking its <a href="../../java/lang/ThreadLocal.html#initialValue--"><code>initialValue()</code></a> method,
 unless its value is <a href="../../java/lang/ThreadLocal.html#set-T-">set</a> by the current thread
 in the interim.  This may result in multiple invocations of the
 <code>initialValue</code> method in the current thread.</div>
<dl>
<dt><span class="simpleTagLabel">???????:</span></dt>
<dd>1.5</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="??????">??????</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="??">
<li><a href="../../overview-summary.html">??</a></li>
<li><a href="package-summary.html">???</a></li>
<li class="navBarCell1Rev">?</li>
<li><a href="class-use/ThreadLocal.html">??</a></li>
<li><a href="package-tree.html">?</a></li>
<li><a href="../../deprecated-list.html">???</a></li>
<li><a href="../../index-files/index-1.html">??</a></li>
<li><a href="../../help-doc.html">??</a></li>
</ul>
<div class="aboutLanguage"><strong>Java&trade;&nbsp;Platform<br>Standard&nbsp;Ed.&nbsp;8</strong><br><strong>DRAFT&nbsp;internal-b00</strong></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../java/lang/ThreadGroup.html" title="java.lang???"><span class="typeNameLink">????</span></a></li>
<li><a href="../../java/lang/Throwable.html" title="java.lang???"><span class="typeNameLink">????</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?java/lang/ThreadLocal.html" target="_top">??</a></li>
<li><a href="ThreadLocal.html" target="_top">???</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">???</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>??:&nbsp;</li>
<li>??&nbsp;|&nbsp;</li>
<li>??&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">???</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">??</a></li>
</ul>
<ul class="subNavList">
<li>????:&nbsp;</li>
<li>??&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">???</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">??</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small><font size="-1"> <a href="http://bugreport.sun.com/bugreport/">Submit a bug or feature</a> <br>For further API reference and developer documentation, see <a href="https://docs.oracle.com/javase/8/docs/index.html" target="_blank">Java SE Documentation</a>. That documentation contains more detailed, developer-targeted descriptions, with conceptual overviews, definitions of terms, workarounds, and working code examples.<br> <a href="https://docs.oracle.com/javase/7/docs/legal/cpyr.html">Copyright</a> &#x00a9; 1993, 2020, Oracle and/or its affiliates.  All rights reserved. </font><br><strong>DRAFT&nbsp;internal-b00</strong></small></p>
</body>
</html>
